{{#if query.description}}
/**
 * {{query.description}}
 */
{{/if}}

export interface {{query.name}}Params {
  {{#each query.params}}
  {{this.name}}: {{this.type}};
  {{/each}}
}

{{#if query.returnFields}}
export interface {{query.returnType}} {
  {{#each query.returnFields}}
  {{this.alias}}{{#if this.nullable}}?{{/if}}: {{this.type}};
  {{/each}}
}
{{/if}}

export type {{query.name}}Result = {{query.returnType}};

export async function {{query.name}}(
  db: any,
  params: {{query.name}}Params
): Promise<{{#if query.returnSingle}}{{query.name}}Result{{else}}{{query.name}}Result[]{{/if}}> {
  const result = await db.execute<{{query.name}}Result>(`{{{query.sql}}}`, [
    {{#each query.params}}
    params.{{this.name}},
    {{/each}}
  ]);
  
  return {{#if query.returnSingle}}result[0]{{else}}result{{/if}};
}